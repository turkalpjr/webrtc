{"ast":null,"code":"import store from '../../store/store';\nimport { setLocalStream, setCallState, callStates, setCallingDialogVisible, setCallerUsername } from '../../store/actions/callActions';\nimport * as wss from '../wssConnection/wssConnection';\nconst defaultConstrains = {\n  video: true,\n  audio: true\n};\nexport const getLocalStream = () => {\n  navigator.mediaDevices.getUserMedia(defaultConstrains).then(stream => {\n    store.dispatch(setLocalStream(stream));\n    store.dispatch(setCallState(callStates.CALL_AVAILABLE));\n  }).catch(err => {\n    console.log('error occured when trying to get an access to get local stream');\n    console.log(err);\n  });\n};\nlet connectedUserSocketId;\nexport const callToOtherUser = calleeDetails => {\n  connectedUserSocketId = calleeDetails.socketId;\n  store.dispatch(setCallState(callStates.CALL_IN_PROGRESS));\n  store.dispatch(setCallingDialogVisible(true));\n  wss.sendPreOffer({\n    callee: calleeDetails,\n    caller: {\n      username: store.getState().dashboard.username\n    }\n  });\n};\nexport const handlePreOffer = data => {\n  connectedUserSocketId = data.callerSocketId;\n  store.dispatch(setCallerUsername(data.callerUsername));\n  store.dispatch(setCallState(callStates.CALL_REQUESTED));\n};","map":{"version":3,"names":["store","setLocalStream","setCallState","callStates","setCallingDialogVisible","setCallerUsername","wss","defaultConstrains","video","audio","getLocalStream","navigator","mediaDevices","getUserMedia","then","stream","dispatch","CALL_AVAILABLE","catch","err","console","log","connectedUserSocketId","callToOtherUser","calleeDetails","socketId","CALL_IN_PROGRESS","sendPreOffer","callee","caller","username","getState","dashboard","handlePreOffer","data","callerSocketId","callerUsername","CALL_REQUESTED"],"sources":["D:/videotalker/video-talker-frontend/src/utils/webRTC/webRTCHandler.js"],"sourcesContent":["import store from '../../store/store';\r\nimport { setLocalStream, setCallState, callStates, setCallingDialogVisible, setCallerUsername } from '../../store/actions/callActions';\r\nimport * as wss from '../wssConnection/wssConnection';\r\nconst defaultConstrains = {\r\n  video: true,\r\n  audio: true\r\n};\r\n\r\nexport const getLocalStream = () => {\r\n  navigator.mediaDevices.getUserMedia(defaultConstrains)\r\n    .then(stream => {\r\n      store.dispatch(setLocalStream(stream));\r\n      store.dispatch(setCallState(callStates.CALL_AVAILABLE));\r\n    })\r\n    .catch(err => {\r\n      console.log('error occured when trying to get an access to get local stream');\r\n      console.log(err);\r\n    });\r\n}\r\n;\r\n\r\nlet connectedUserSocketId;\r\nexport const callToOtherUser=(calleeDetails)=>{\r\n  connectedUserSocketId=calleeDetails.socketId;\r\n  store.dispatch(setCallState(callStates.CALL_IN_PROGRESS));\r\n  store.dispatch(setCallingDialogVisible(true));\r\n  wss.sendPreOffer({\r\n    callee:calleeDetails,\r\n    caller:{\r\n      username:store.getState().dashboard.username\r\n    }\r\n  })\r\n}\r\n\r\n\r\nexport const handlePreOffer=(data)=>{\r\n  connectedUserSocketId=data.callerSocketId;\r\n  store.dispatch(setCallerUsername(data.callerUsername));\r\n  store.dispatch(setCallState(callStates.CALL_REQUESTED))\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,mBAAmB;AACrC,SAASC,cAAc,EAAEC,YAAY,EAAEC,UAAU,EAAEC,uBAAuB,EAAEC,iBAAiB,QAAQ,iCAAiC;AACtI,OAAO,KAAKC,GAAG,MAAM,gCAAgC;AACrD,MAAMC,iBAAiB,GAAG;EACxBC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,cAAc,GAAG,MAAM;EAClCC,SAAS,CAACC,YAAY,CAACC,YAAY,CAACN,iBAAiB,CAAC,CACnDO,IAAI,CAACC,MAAM,IAAI;IACdf,KAAK,CAACgB,QAAQ,CAACf,cAAc,CAACc,MAAM,CAAC,CAAC;IACtCf,KAAK,CAACgB,QAAQ,CAACd,YAAY,CAACC,UAAU,CAACc,cAAc,CAAC,CAAC;EACzD,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;IACZC,OAAO,CAACC,GAAG,CAAC,gEAAgE,CAAC;IAC7ED,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;EAClB,CAAC,CAAC;AACN,CAAC;AAGD,IAAIG,qBAAqB;AACzB,OAAO,MAAMC,eAAe,GAAEC,aAAa,IAAG;EAC5CF,qBAAqB,GAACE,aAAa,CAACC,QAAQ;EAC5CzB,KAAK,CAACgB,QAAQ,CAACd,YAAY,CAACC,UAAU,CAACuB,gBAAgB,CAAC,CAAC;EACzD1B,KAAK,CAACgB,QAAQ,CAACZ,uBAAuB,CAAC,IAAI,CAAC,CAAC;EAC7CE,GAAG,CAACqB,YAAY,CAAC;IACfC,MAAM,EAACJ,aAAa;IACpBK,MAAM,EAAC;MACLC,QAAQ,EAAC9B,KAAK,CAAC+B,QAAQ,EAAE,CAACC,SAAS,CAACF;IACtC;EACF,CAAC,CAAC;AACJ,CAAC;AAGD,OAAO,MAAMG,cAAc,GAAEC,IAAI,IAAG;EAClCZ,qBAAqB,GAACY,IAAI,CAACC,cAAc;EACzCnC,KAAK,CAACgB,QAAQ,CAACX,iBAAiB,CAAC6B,IAAI,CAACE,cAAc,CAAC,CAAC;EACtDpC,KAAK,CAACgB,QAAQ,CAACd,YAAY,CAACC,UAAU,CAACkC,cAAc,CAAC,CAAC;AACzD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}